@app.post("/webhook")

def receive_trap(trap):
 
    proper_format = {
        "properties": {},
        "routing_key": "",
        "payload": trap,
        "payload_encoding": "",
    }
    headers = {
        "content": "application/json",
    }
    if trap is None:
        raise HTTPException(status_code=404, detail=f"No payload")
 
    response = requests.post(rabbitmq_url, data=trap.to_string(),headers=headers, auth=("kubadmin", "password"))
 
    if response.status_code != 200:
        raise HTTPException(status_code=401, detail="Data transfer not successful to second endpoint.")
if __name__ == "__main__":
    uvicorn.run("app:app", host="")
